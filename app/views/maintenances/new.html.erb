<%content_for :external_css do %>
  <%= render_select2_css %>
<%end%>

<div class="card-header">
  <h5 class="card-title">Nueva planilla de Mantenimiento</h5>
</div>
<div class="card">
  <div class="card-body">
    <%= form_for(current_vehicle, url: multiple_maintenances_path, method: :post) do |f|%>
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col" class="text-left">Fecha</th>
              <th scope="col" class="text-left">Categoría</th>
              <th scope="col" class="text-left">Descripción</th>
              <th scope="col" class="text-left">Valor</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="maintenances" class="">
            <%= f.fields_for :maintenances, @maintenance_service.try(:maintenances) || current_vehicle.maintenances.new do |m| %>
              <%= render partial: 'maintenance_fields', locals: {f: m}%>
            <%end%>
          </tbody>
        </table>

        <div class="row-fluid mb-4">
          <div class="col-sm-12 text-center add_maintenance">
            <%=link_to_add_association 'Agregar Registro', f, :maintenances, class: "btn btn-success", partial: 'maintenance_fields', "data-association-insertion-node" => '#maintenances', "data-association-insertion-method"=>"append"%>
          </div>
        </div>

        <div class="row-fluid">
          <div class="col-sm-12 text-center">
            <%= f.submit 'Guardar', class: "btn btn-primary"%>
            <%= link_to 'Cancelar', :back, class: 'btn btn-light'%>
          </div>
        </div>
      </div>
    <%end%>
  </div>
</div>
